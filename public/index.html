<!doctype html>
<html>
<head>
    <title></title>
    <link rel="stylesheet" href="/styles.css">
    <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:300,400,500,600,700" rel="stylesheet">
</head>
<body>
    <h1>Imageboard</h1>

    <div id="main">

        <h2>image upload</h2>
        <form>
            <input v-model="form.title" type="text" placeholder="title" name="title">
            <input  v-model="form.description" type="text" placeholder="description" name="description">
            <input  v-model="form.username" type="text" placeholder="username" name="username">
            <label class="custom-file-upload">
            <input type="file" accept="image/*" @change = "handleFileChange">upload your image</label>
            <button @click = "uploadFile" id="fileupload">upload</button>
        </form>

        <h2>latest pictures</h2>
        <div class="imgcontainer">
            <!-- an alternative way to pass the id of the image just clicked is to pass it as an argument to the click event function: @click ="toggleComponent(image.id)" -->
            <div v-for = 'image in images' class="imagebox" @click ="toggleComponent" >
                <!-- redirect path #id -->
                <a :href =" '#' +image.id"><img :src="image.url" class="img" :id="image.id"></a>
                <h4>{{ image.title }}</h4>
            </div>
        </div>

        <button @click = "getMoreImages">more</button>

        <!-- name on the left is refering to name in props (must use kebab-case in vue attributes) - name on the right is refering to the name in the Vue instance -->
        <popup :image-id = "imageId" v-if="imageId > 0" @close-the-component = closingTheComponent>
        </popup>


    </div>

    <!-- this script must be outside of #main -->

    <script id="popup-template" type="text/x-template">
        <div class="single-image-container">

            <h3 @click = "closeComponent" id="close">x</h3>

            <div class="imagepopup">
                <h2>{{ singleImage.title }}</h2>
                <img :src="singleImage.url" class="selected-img">
                <p><strong>description: </strong>{{ singleImage.description }}</p>
                <p><strong>uploaded by: </strong>{{ singleImage.username }}</p>
                <p><strong>date: </strong>{{ singleImage.created_at }}</p>
            </div>

            <form class="submit-comment">
                <input v-model="form.comment" type="text" name="comment" placeholder="your comment">
                <input  v-model="form.username" type="text" placeholder="username" name="username">
                <button @click = "submitComment">submit</button>
            </form>

            <div class="comments">
                <h2>Recent Comments</h2>
                <div v-for = "singleComment in comments" class="singleComment">
                    <p>{{ singleComment.comment }}</p>
                    <p>{{ singleComment.username }}</p>
                    <p>{{ singleComment.created_at }}</p>
                </div>
            </div>

        </div>

    </script>



    <script src="/js/vue.js"></script>
    <script src="/js/axios.min.js"></script>
    <script src="/js/script.js"></script>
</body>
</html>
